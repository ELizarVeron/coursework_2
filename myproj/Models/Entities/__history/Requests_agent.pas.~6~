unit Requests_agent;

interface

uses System.Generics.Collections, Product,Vcl.Dialogs;

type
  TRequest_agent = class
  private
    FStatus, FCompany: string;
    FID_Request, FID_Agent: integer;
    FDate_Of_Create: TDateTime;
    FDate_Of_Confirm: TDateTime;
    FDate_Of_Begin: TDateTime;
    FPremayment, FDone:boolean;
    procedure SetStatus(const Value: string);
    
  protected
  public
    function GetCost:integer;
    property ID_Agent: integer read FID_Agent write FID_Agent;
    property ID_Request: integer read FID_Request write FID_Request;
    property Company: string read FCompany write FCompany;

    property Status: string read FStatus write SetStatus;

    property Date_Of_Create: TDateTime read FDate_Of_Create write FDate_Of_Create;
    property Date_Of_Confirm: TDateTime read FDate_Of_Confirm write FDate_Of_Confirm;
    property Date_Of_Begin: TDateTime read FDate_Of_Begin write FDate_Of_Begin;
    property Premayment: boolean read FPremayment write FPremayment;
    property Done: boolean read FDone write FDone;
  var
     Composition: TObjectList<TProduct>;

  end;

implementation

{ TRequest_agent }

function TRequest_agent.GetCost: integer;
var i,sum:integer;
begin
       
      try
          for  i:= 0 to Composition.Count-1 do
          begin
              sum:= sum+Composition[i].Cost;

          end;
      except  
           
             ShowMessage('Composition is empty!!');
      end;
 

end;

procedure TRequest_agent.SetStatus(const Value: string);
begin
  if (Value = '1')or(Value = 'Создана')  then
      FStatus := 'Создана'
  else
  if (Value = '2')or(Value = 'В ожидании оплаты') then
      FStatus := 'В ожидании оплаты'
  else
  if (Value = '3')or(Value ='В обработке') then
      FStatus := 'В обработке'
  else
  if (Value = '4')or(Value ='В работе') then
      FStatus := 'В работе'
  else
  if (Value = '5')or( Value ='Готова') then
      FStatus := 'Готова'
  else
  if (Value = '6') or(Value = 'В ожидании отправления') then
      FStatus := 'В ожидании отправления'
  else
  if (Value = '7')or(Value ='Завершена') then
      FStatus := 'Завершена'
  else
       FStatus := 'ошибка в TRequest_Agent'


end;

end.
