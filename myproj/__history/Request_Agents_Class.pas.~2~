unit Request_Agents_Class;

interface
  uses    System.Generics.Collections, Data.Win.ADODB, System.SysUtils, Vcl.Controls,
  Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls, Vcl.StdCtrls, Vcl.ExtCtrls,
  TABLE_Agents, TABLE_History_Of_Reliz,   TABLE_Requests_agent,
   TABLE_Suppliers,   Main_Class,
  Frame_req_a;
  type
     TRequest_Agents_Class = class(TMain_Class)
      public
      var
          array_of_requests_agent: TObjectList<TRequest_Agent>;
          fr: TFrame;
           constructor Create();
            procedure load_frames(Panel1: TPanel; page, count_in_bd: integer); override;
            function from_ado_to_array_req_ag(ado: tADOQuery): TObjectList<TRequest_Agent>;
     end;

implementation
constructor TRequest_Agents_Class.Create();
begin
  inherited;
 array_of_requests_agent := from_ado_to_array_req_ag(sql_select('*', 'Request_from_agent', '',
    '', false));
end;

function TRequest_Agents_Class.from_ado_to_array_req_ag(ado: tADOQuery): TObjectList<TRequest_Agent>;
 begin
      var
    req: TRequest_Agent;
  var
  array_of_requests_agent := TObjectList<TRequest_Agent>.Create;
  while not ado.Eof do
  begin
    req := TRequest_Agent.Create();
    req.ID_Request := ado.Fields[0].AsInteger;
    req.ID_Agent := ado.Fields[1].AsInteger;
    req.Status:=  ado.Fields[2].AsString;

    array_of_requests_agent.Add(req);
    ado.Next;
  end;
  result := array_of_requests_agent;

 end;




end.
